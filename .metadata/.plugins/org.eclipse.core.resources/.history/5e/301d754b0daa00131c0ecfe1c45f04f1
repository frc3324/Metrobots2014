#include "pickup.h"
#include <Math.h>

Pickup::Pickup( SpeedController *motor_, DualRelay *angleMotor_, DigitalInput *bottomSwitch_, DigitalInput *topSwitch_ ) {

	motor = motor_;
	angleMotor = angleMotor_;
	bottomSwitch = bottomSwitch_;
	topSwitch = topSwitch_;
	angleMotorBool = Relay::kOff;
	motorSpeed = 0.0;
	
	angleState = Stopped;
                
}

void Pickup::Actuate() {
	motor->Set(motorSpeed);
	angleMotor->Set(angleMotorBool);
	
	/*if( angleState == Up && topSwitch == 0 ) {
		angleMotorBool = Relay::kReverse;
	}else if ( angleState == Down && bottomSwitch == 0 ) {
		angleMotorBool = Relay::kForward;
	}else{
		angleState = Stopped;
		angleMotorBool = Relay::kOff;
	}*/
}

void Pickup::Disable() {
	motorSpeed = 0.0;
	angleMotor->Set(Relay::kOff);
	motor->Set(0.0);
	angleState = Stopped;
}

void Pickup::RunIntake(double wheelSpeed) {
	motorSpeed = wheelSpeed * 0.85;
}

void Pickup::ArmAngle(double upMotorSpeed) {
	//angleMotorSpeed = upMotorSpeed;
}

void Pickup::Raise() {
	angleMotorBool = Relay::kReverse;
	//if(angleState == Stopped) angleState = Up;
}

void Pickup::Lower() {
	angleMotorBool = Relay::kForward;
	//if(angleState == Stopped) angleState = Down;
}

void Pickup::StopAngle() {
	angleMotorBool = Relay::kOff;
	//angleState = Stopped;
}

void Pickup::Intake() {
	motorSpeed = -0.85;
}

void Pickup::Expel() {
	motorSpeed = 0.85;
}

void Pickup::StopIntake() {
	motorSpeed = 0;
}
